{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/19681/Downloads/yike/yike/yikeroom/pages/chatroom/chatroom.vue?0958","webpack:///C:/Users/19681/Downloads/yike/yike/yikeroom/pages/chatroom/chatroom.vue?511f","webpack:///C:/Users/19681/Downloads/yike/yike/yikeroom/pages/chatroom/chatroom.vue?c9fb","uni-app:///pages/chatroom/chatroom.vue","webpack:///C:/Users/19681/Downloads/yike/yike/yikeroom/pages/chatroom/chatroom.vue?8ed1","webpack:///C:/Users/19681/Downloads/yike/yike/yikeroom/pages/chatroom/chatroom.vue?6d35"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","chatm","picSrc","name","uname","fid","uid","img","chat","member","animationData","bb","bg","users","otochat","onLoad","console","methods","timeDetia","h","m","time","M","D","sendMsg","neir","id","tid","ChoosePic","count","mediaType","sourceType","maxDuration","camera","success","readObj","imgCompress","ctx","join","welcome","myself","quit","receiveMsg","getmsg","otoChat","outotoChat","modify","duration","timingFunction","animation"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,iBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;AACc;;;AAGrE;AACgM;AAChM,gBAAgB,uMAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrCA;AAAA;AAAA;AAAA;AAAsvB,CAAgB,ovBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCqF1wB;EACAC;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;IACA;IACA;IACAA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;EACAC;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEA;QACA;UACAC;QACA;QACA;UACAC;QACA;QACAC;QACA;MACA;QACA;UACAF;QACA;QACA;UACAC;QACA;QACAC;QACA;MACA;QACA;UACAC;QACA;QACA;UACAC;QACA;QACA;UACAJ;QACA;QACA;UACAC;QACA;QACAC;QACA;MACA;IACA;IACA;IACAG;MACA;QACA;UACAC;UACAvB;UACAK;UACAc;UACAK;QACA;QACA;UACAD;UACAvB;UACAK;UACAJ;UACAkB;UACAK;QACA;QACA;QACAV;QACA;QACA;MACA;QACA;QACA;UACAS;UACAlB;UACAc;UACAhB;UACAsB;QACA;QACA;UACAF;UACAlB;UACAJ;UACAkB;UACAhB;UACAsB;QACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;UAAA;YAAA;YAAA;cAAA;gBAAA;kBAAA;oBACAC,4BACA;oBACAA;sBACAnB;sBACAoB;oBACA;;oBAEA;oBACA;oBACA;oBACA;oBACA;oBACA;oBACA;oBACA;oBACA;oBACA;oBACA;oBACA;oBACA;oBACA;oBACA;oBACA;oBACA;kBAAA;kBAAA;oBAAA;gBAAA;cAAA;YAAA;UAAA,CACA;UAAA;YAAA;UAAA;UAAA;QAAA;MACA;IACA;IACAA;MACA;MACA;MACA7B;MACAA;QACA;QACA8B;QACA;QACArB;MACA;IACA;IACA;IACAsB;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;QACA;QACA;QACA;QACA;UACApC;UACAuB;QACA;QACA;QACA;UACA;YACAb;UACA;QACA;QACA;QACA;MACA;IACA;;IACA;IACA2B;MAAA;MACA;MACA;QACA;QACA;QACA;QACA;QACAxB;QACA;UACAb;UACAuB;QACA;QACA;QACA;UACA;YACAb;UACA;QACA;QACA;QACAG;MACA;IACA;IACA;IACAyB;MAAA;MACA;MACA;QACA;QACA;UACAtC;UACAuB;QACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAgB;MAAA;MACA;MACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA;QACA;UACA;YACA;cACA;YACA;UACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA5B;MACAA;MACA;IACA;IACA;IACA6B;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;MACA;QACAC;QACAC;MACA;MACA;MACA;QACAC;MAEA;QACAA;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC/XA;AAAA;AAAA;AAAA;AAAq5C,CAAgB,20CAAG,EAAC,C;;;;;;;;;;;ACAz6C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/chatroom/chatroom.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/chatroom/chatroom.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chatroom.vue?vue&type=template&id=4748afe6&\"\nvar renderjs\nimport script from \"./chatroom.vue?vue&type=script&lang=js&\"\nexport * from \"./chatroom.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chatroom.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/chatroom/chatroom.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatroom.vue?vue&type=template&id=4748afe6&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.chat, function (e, index) {\n    var $orig = _vm.__get_orig(e)\n    var m0 = e.id == 1 ? _vm.timeDetia(e.time) : null\n    var m1 = e.id == 2 ? _vm.timeDetia(e.time) : null\n    return {\n      $orig: $orig,\n      m0: m0,\n      m1: m1,\n    }\n  })\n  var l1 = _vm.__map(_vm.otochat, function (e, index) {\n    var $orig = _vm.__get_orig(e)\n    var m2 = e.fid == _vm.fid ? _vm.timeDetia(e.time) : null\n    var m3 = e.fid == _vm.uid && e.tid == _vm.fid ? _vm.timeDetia(e.time) : null\n    return {\n      $orig: $orig,\n      m2: m2,\n      m3: m3,\n    }\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatroom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatroom.vue?vue&type=script&lang=js&\"","<template>\r\n  <view>\r\n    <view class=\"status-bar\">\r\n      <navigator open-type=\"navigateBack\" class=\"login-c\" hover-class=\"none\">\r\n        <image src=\"../../static/back.png\" class=\"login-back\"></image>\r\n      </navigator>\r\n      <scroll-view scroll-x=\"true\" class=\"scrollv\">\r\n        <view class=\"users\">\r\n          <view v-for=\"(e,index) in users\" class=\"user-l\" @tap=\"otoChat(index)\">\r\n            <view class=\"tip\" v-if=\"e.tip\"></view>\r\n            <image :src=\"'../../static/images/'+e.img+'.png'\"></image>\r\n          </view>\r\n\r\n        </view>\r\n      </scroll-view>\r\n    </view>\r\n    <view class=\"main\">\r\n      <view v-for=\"(e,index) in chat\" :key=\"index\">\r\n        <view class=\"left msg\" v-if=\"e.id ==1\">\r\n          <image :src=\"'../../static/images/'+e.img+'.png'\"></image>\r\n          <view class=\"nr\">\r\n            <view class=\"neir\">\r\n              {{e.neir + 'test'}}\r\n              <image :src=\"e.picSrc\"></image>\r\n            </view>\r\n            <view class=\"nt\">{{e.name}} {{timeDetia(e.time)}}</view>\r\n          </view>\r\n        </view>\r\n        <view class=\"right msg\" v-if=\"e.id==2\">\r\n          <image :src=\"'../../static/images/'+e.img+'.png'\"></image>\r\n          <view class=\"nr\">\r\n            <view class=\"neir\">\r\n              {{e.neir + 'test1'}}\n              <image :src=\"e.picSrc\"></image>\r\n            </view>\r\n            <view class=\"nt\">{{timeDetia(e.time)}}</view>\r\n          </view>\r\n        </view>\r\n        <view class=\"center\" v-if=\"e.id==3\">\r\n          <view class=\"inner\">{{e.name}}</view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <view class=\"send\">\r\n      <textarea type=\"text\" confirm-type=\"send\" class=\"chat-send\" v-model=\"chatm\" auto-height=\"true\"\r\n        show-confirm-bar=\"false\" maxlength=\"-1\" />\r\n      <image src=\"../../static/pic.png\" mode=\"aspectFit\" @tap=\"ChoosePic\"></image>\r\n      <image src=\"../../static/send.png\" mode=\"aspectFit\" @tap=\"sendMsg\"></image>\r\n    </view>\r\n    <!-- 弹出层一对一聊天 -->\r\n    <view class=\"modify\" :animation=\"animationData\">\r\n      <view class=\"u-name\">\r\n        {{uname}}\r\n      </view>\r\n      <scroll-view class=\"modfiy-mian\" scroll-y=\"true\">\r\n        <view v-for=\"(e,index) in otochat\" :key=\"index\">\r\n          <view class=\"left msg\" v-if=\"e.fid == fid\">\r\n            <image :src=\"'../../static/images/'+e.img+'.png'\"></image>\r\n            <view class=\"nr\">\r\n              <view class=\"neir\">\r\n                {{e.neir}}\r\n              </view>\r\n              <view class=\"nt\">{{timeDetia(e.time)}}</view>\r\n            </view>\r\n          </view>\r\n          <view class=\"right msg\" v-if=\"e.fid==uid && e.tid == fid\">\r\n            <image :src=\"'../../static/images/'+e.img+'.png'\"></image>\r\n            <view class=\"nr\">\r\n              <view class=\"neir\">\r\n                {{e.neir}}\r\n              </view>\r\n              <view class=\"nt\">{{timeDetia(e.time)}}</view>\r\n            </view>\r\n          </view>\r\n          <view class=\"center\" v-if=\"e.id==3\">\r\n            <view class=\"inner\">{{e.name}}</view>\r\n          </view>\r\n        </view>\r\n      </scroll-view>\r\n    </view>\r\n    <view class=\"bg\" @tap=\"outotoChat\" :style=\"{display:bg}\"></view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        chatm: '', //消息内容\r\n        picSrc: '', // 聊天图片\r\n        name: '', //用户名称\r\n        uname: '', //一对一聊天对方用户名\r\n        fid: '', //一对一聊天对象的id\r\n        uid: 'a',\r\n        img: '', //用户头像\r\n        chat: [], //聊天内容\r\n        member: 0, //成员个数\r\n        animationData: {},\r\n        bb: false, //进入/推出一对一动画\r\n        bg: 'none',\r\n        users: '',\r\n        otochat: []\r\n      }\r\n    },\r\n    onLoad: function(e) {\r\n      console.log('e', e);\r\n      this.name = e.name;\r\n      this.img = e.img;\r\n      console.log('img：', this.img)\r\n      this.join(this.name, this.img);\r\n      this.welcome();\r\n      this.myself();\r\n      this.receiveMsg();\r\n      this.getmsg();\r\n      this.quit();\r\n    },\r\n    methods: {\r\n      timeDetia: function(date) {\r\n        var time;\r\n        var d = new Date(date);\r\n        var n = new Date();\r\n        //获取时间戳\r\n        var dd = d.getTime();\r\n        var h = d.getHours();\r\n        var m = d.getMinutes();\r\n        var Y = d.getFullYear();\r\n        var M = d.getMonth() + 1;\r\n        var D = d.getDate();\r\n        //现在时间\r\n        var nn = n.getTime();\r\n        var hh = n.getHours();\r\n        var mm = n.getMinutes();\r\n        var YY = n.getFullYear();\r\n        var MM = n.getMonth() + 1;\r\n        var DD = n.getDate();\r\n\r\n        if (D == DD && M == MM && Y == YY) {\r\n          if (h < 10) {\r\n            h = '0' + h;\r\n          }\r\n          if (m < 10) {\r\n            m = '0' + m;\r\n          }\r\n          time = h + ':' + m;\r\n          return time;\r\n        } else if (D + 1 == DD && M == MM && Y == YY) {\r\n          if (h < 10) {\r\n            h = '0' + h;\r\n          }\r\n          if (m < 10) {\r\n            m = '0' + m;\r\n          }\r\n          time = '昨天' + ' ' + h + ':' + m;\r\n          return time;\r\n        } else {\r\n          if (M < 10) {\r\n            M = '0' + M;\r\n          }\r\n          if (D < 10) {\r\n            D = '0' + D;\r\n          }\r\n          if (h < 10) {\r\n            h = '0' + h;\r\n          }\r\n          if (m < 10) {\r\n            m = '0' + m;\r\n          }\r\n          time = Y + '年' + M + '月' + D + '日' + ' ' + h + ':' + m;\r\n          return time;\r\n        }\r\n      },\r\n      //发送消息\r\n      sendMsg: function() {\r\n        if (this.chatm.length > 0 && this.fid == '') {\r\n          let onemsg = {\r\n            neir: this.chatm,\r\n            picSrc: this.picSrc,\r\n            img: this.img,\r\n            time: new Date(),\r\n            id: 2,\r\n          }\r\n          let data = {\r\n            neir: this.chatm,\n            picSrc: this.picSrc,\r\n            img: this.img,\r\n            name: this.name,\r\n            time: new Date(),\r\n            id: 1,\r\n          }\r\n          this.chat.push(onemsg);\n          console.log(this.chat)\r\n          this.chatm = ''; //清空\r\n          this.socket.emit('message', data);\r\n        } else if (this.chatm.length > 0 && this.fid != '') {\r\n          //一对一聊天\r\n          let onemsg = {\r\n            neir: this.chatm,\r\n            img: this.img,\r\n            time: new Date(),\r\n            fid: this.uid,\r\n            tid: this.fid,\r\n          }\r\n          let data = {\r\n            neir: this.chatm,\r\n            img: this.img,\r\n            name: this.name,\r\n            time: new Date(),\r\n            fid: this.uid,\r\n            tid: this.fid,\r\n          }\r\n          this.otochat.push(onemsg);\r\n          this.chatm = ''; //清空\r\n          this.socket.emit('msg', data);\r\n        }\r\n      },\r\n      // 选择图片\r\n      ChoosePic: function() {\r\n        let pic = uni.chooseImage({\r\n          count: 9,\r\n          mediaType: ['image', 'video'],\r\n          sourceType: ['album', 'camera'],\r\n          maxDuration: 30,\r\n          camera: 'back',\r\n          success:async (res) => {\n            const readObj = new FileReader()\n            // 绑定监听事件，当文件被读取时触发\n            readObj.onload = () => {\n              console.log(readObj.result)\n              imgCompress(readObj.result,90,'image/png')\n            }\n              \r\n            // // console.log(res.tempFiles[0])\r\n            // let url = ''\r\n            // const result = await this.fileToBase64Async(res.tempFiles[0])\n            // this.url = result\n            // let canvas = document.createElement('canvas')\r\n            // let img = document.createElement('img')\n            // img.crossOrigin = 'anonymous'\n            // img.src = this.url\n            // console.log('url', img.src)\r\n            // canvas.width = img.width\r\n            // canvas.height = img.height\r\n            // var ctx = canvas.getContext(\"2d\")\n            // // console.log(img)\r\n            // ctx.drawImage(img, 0, 0, img.width, img.height)\r\n            // var dataURL = canvas.toDataURL(\"image/png\", 0.9)\r\n            // this.picSrc = dataURL\r\n            // console.log('picsrc：', dataURL)\r\n          }\r\n        })\r\n      },\r\n      imgCompress: function(imgBase64,quality,myType) {\r\n        let canvas = document.createElement('canvas')\n        let img = document.createElement('img')\n        img.src = imgBase64\n        img.onload = () => {\n          let ctx = canvas.getContext('2d')\n          ctx.drawImage(img,0,0,img.width,img.height)\n          let newImgBase = canvas.toDataURL(quality / 100,myType)\n          console.log(newImgBase)\n        }\r\n      },\r\n      //加入群\r\n      join: function(name, img) {\r\n        this.socket.emit('join', name, img);\r\n      },\r\n      //欢迎加入群\r\n      welcome: function() {\r\n        //获取即时信息渲染\r\n        this.socket.on('welcome', (name, users) => {\r\n          // console.log(data)\r\n          // console.log('数字'+len)\r\n          //插入欢迎信息\r\n          let wel = {\r\n            name: '欢迎 ' + name + ' 加入群聊',\r\n            id: 3,\r\n          }\r\n          this.chat.push(wel);\r\n          for (var i = 0; i < users.length; i++) {\r\n            if (users[i].id == this.uid) {\r\n              users.splice(i, 1);\r\n            }\r\n          }\r\n          this.users = users;\r\n          // console.log(this.users)\r\n        })\r\n      },\r\n      //获取自己\r\n      myself: function() {\r\n        //获取即时信息渲染\r\n        this.socket.on('myself', (name, users, id) => {\r\n          // console.log(data)\r\n          // console.log('数字'+len)\r\n          //插入欢迎信息\r\n          this.uid = id;\r\n          console.log(this.uid);\r\n          let wel = {\r\n            name: '欢迎 ' + name + ' 加入群聊',\r\n            id: 3,\r\n          }\r\n          this.chat.push(wel);\r\n          for (var i = 0; i < users.length; i++) {\r\n            if (users[i].id == this.uid) {\r\n              users.splice(i, 1);\r\n            }\r\n          }\r\n          this.users = users;\r\n          console.log(this.users)\r\n        })\r\n      },\r\n      //退出群提醒\r\n      quit: function() {\r\n        //获取即时信息渲染\r\n        this.socket.on('quit', (data, len) => {\r\n          //插入退出信息\r\n          let wel = {\r\n            name: data + ' 退出群聊',\r\n            id: 3,\r\n          }\r\n          this.chat.push(wel);\r\n          //this.member = len;\r\n          this.users = users;\r\n        })\r\n      },\r\n      //获取消息\r\n      receiveMsg: function() {\r\n        //获取即时信息渲染\r\n        this.socket.on('sendMsg', data => {\r\n          this.chat.push(data);\r\n        })\r\n      },\r\n      //获取一对一消息\r\n      getmsg: function() {\r\n        this.socket.on('sMsg', data => {\r\n          let fid = data.fid;\r\n          if (this.fid != fid) {\r\n            for (var i = 0; i < this.users.length; i++) {\r\n              if (this.users[i].id == fid) {\r\n                this.users[i].tip = true;\r\n              }\r\n            }\r\n          }\r\n          //console.log(data);\r\n          this.otochat.push(data);\r\n        })\r\n      },\r\n      //进入一对一聊天\r\n      otoChat: function(e) {\r\n        //获取信息\r\n        this.uname = this.users[e].name;\r\n        this.fid = this.users[e].id;\r\n        this.users[e].tip = false; //tip 头像小红点\r\n        console.log('users', this.users);\r\n        console.log('useree', e);\r\n        this.modify();\r\n      },\r\n      //退出一对一聊天\r\n      outotoChat: function() {\r\n        this.uname = '';\r\n        this.fid = '';\r\n        this.modify();\r\n      },\r\n      //一对一动画\r\n      modify: function() {\r\n        if (this.bb) {\r\n          this.bg = 'block';\r\n        } else {\r\n          this.bg = 'none';\r\n        }\r\n        var animation = uni.createAnimation({\r\n          duration: 400,\r\n          timingFunction: 'ease',\r\n        })\r\n        this.animation = animation\r\n        if (this.bb) {\r\n          animation.bottom(0).step()\r\n\r\n        } else {\r\n          animation.bottom().step()\r\n        }\r\n        this.animationData = animation.export()\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  .status-bar {\r\n    position: fixed;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 88rpx;\r\n    padding-top: var(--status-bar-height);\r\n    display: -webkit-box;\r\n    display: -webkit-flex;\r\n    display: flex;\r\n    overflow: hidden;\r\n    -webkit-box-pack: justify;\r\n    -webkit-justify-content: space-between;\r\n    justify-content: space-between;\r\n    z-index: 998;\r\n    color: #272832;\r\n    -webkit-transition-property: all;\r\n    transition-property: all;\r\n    background: rgba(255, 255, 255, 0.96);\r\n\r\n    .login-c {\r\n      width: 60rpx;\r\n      height: 60rpx;\r\n      padding-top: 22rpx;\r\n      padding-left: 32rpx;\r\n    }\r\n\r\n    .login-back {\r\n      width: 20rpx;\r\n      height: 34rpx;\r\n    }\r\n\r\n    .scrollv {\r\n      width: 84%;\r\n\r\n      .users {\r\n        //background: #eee;\r\n        display: flex;\r\n\r\n        .user-l {\r\n          padding: 12rpx 8rpx;\r\n          position: relative;\r\n\r\n          image {\r\n            width: 64rpx;\r\n            height: 64rpx;\r\n            border-radius: 50%;\r\n          }\r\n\r\n          .tip {\r\n            width: 14rpx;\r\n            height: 14rpx;\r\n            background: rgba(255, 77, 60, 1);\r\n            position: absolute;\r\n            top: 12rpx;\r\n            right: 10rpx;\r\n            border-radius: 50%;\r\n            z-index: 10;\r\n          }\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  .main {\r\n    padding: 160rpx 28rpx 160rpx;\r\n  }\r\n\r\n  .main,\r\n  .modfiy-mian {\r\n\r\n    .msg {\r\n      display: flex;\r\n\r\n      align-items: flex-end;\r\n      padding: 40rpx 0;\r\n\r\n      image {\r\n        flex: none;\r\n        width: 64rpx;\r\n        height: 64rpx;\r\n        border-radius: 18rpx;\r\n        margin: 0 20rpx;\r\n\r\n      }\r\n\r\n      .nr {\r\n        .neir {\r\n          max-width: 380rpx;\r\n          padding: 26rpx 32rpx;\r\n          min-height: 48rpx;\r\n          font-size: 28rpx;\r\n          color: rgba(25, 29, 35, 1);\r\n          line-height: 40rpx;\r\n        }\r\n\r\n        .nt {\r\n          padding-top: 8rpx;\r\n          position: absolute;\r\n          font-size: 24rpx;\r\n          color: rgba(25, 29, 35, 0.5);\r\n          line-height: 34rpx;\r\n        }\r\n      }\r\n    }\r\n\r\n    .left {\r\n      flex-direction: row;\r\n\r\n      .neir {\r\n        background: rgba(244, 244, 244, 1);\r\n        border-radius: 24rpx 24rpx 24rpx 0px;\r\n      }\r\n    }\r\n\r\n    .right {\r\n      flex-direction: row-reverse;\r\n\r\n      .neir {\r\n        background: rgba(255, 234, 222, 1);\r\n        border-radius: 24rpx 24rpx 0px 24rpx;\r\n      }\r\n\r\n      .nt {\r\n        right: 132rpx;\r\n      }\r\n    }\r\n\r\n    .center {\r\n      text-align: center;\r\n      padding: 32rpx 0 20rpx;\r\n\r\n      .inner {\r\n        font-size: 24rpx;\r\n        display: inline-block;\r\n        color: rgba(25, 29, 35, 0.5);\r\n        line-height: 34rpx;\r\n      }\r\n    }\r\n  }\r\n\r\n  .send {\r\n    position: fixed;\r\n    z-index: 1002;\r\n    bottom: 0;\r\n    width: 100%;\r\n\r\n    padding-bottom: var(--status-bar-height);\r\n    min-height: 100rpx;\r\n    background: rgba(255, 255, 255, 0.96);\r\n    display: flex;\r\n    flex-direction: row;\r\n\r\n    .chat-send {\r\n      margin: 12rpx 48rpx;\r\n      flex: 1;\r\n      width: 100%;\r\n      min-height: 40rpx;\r\n      background: rgba(242, 242, 242, 1);\r\n      border-radius: 24rpx;\r\n      font-size: 28rpx;\r\n      color: rgba(25, 29, 35, 1);\r\n      line-height: 40rpx;\r\n      padding: 24rpx 80rpx 24rpx 24rpx;\r\n    }\r\n\r\n    image {\r\n      width: 48rpx;\r\n      height: 48rpx;\r\n      // position: absolute;\r\n      flow: left;\r\n\r\n      // display: block;\r\n      right: 68rpx;\r\n      top: 32rpx;\r\n    }\r\n  }\r\n\r\n  .modify {\r\n    position: fixed;\r\n    overflow: hidden;\r\n    left: 0;\r\n    bottom: -90%;\r\n    width: 100%;\r\n    height: 90%;\r\n    z-index: 1000;\r\n    background: #fff;\r\n    border-radius: 48rpx 48rpx 0px 0px;\r\n  }\r\n\r\n  .u-name {\r\n    position: absolute;\r\n    top: 0;\r\n    background-color: #fff;\r\n    height: 80rpx;\r\n    text-align: center;\r\n    width: 100%;\r\n    line-height: 80rpx;\r\n  }\r\n\r\n  .modfiy-mian {\r\n    padding: 88rpx 28rpx 120rpx;\r\n    box-sizing: border-box;\r\n    height: 100%;\r\n  }\r\n\r\n  .bg {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 999;\r\n    background-color: rgba(0, 0, 0, 0.4);\r\n  }\r\n</style>\n","import mod from \"-!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatroom.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatroom.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1676457265722\n      var cssReload = require(\"C:/Users/19681/Downloads/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}